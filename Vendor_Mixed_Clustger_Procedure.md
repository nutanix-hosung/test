# 문제 진술

Nutanix는 동일한 클러스터에서 다양한 하드웨어 공급업체의 노드를 혼합하는 것을 지원하지 않습니다.[KB-10240](https://portal.nutanix.com/page/documents/kbs/details?targetId=kA00e000000bsihCAA)자세한 내용은.

Nutanix는 동일한 클러스터에서 4세대 이상의 NX 플랫폼 노드를 혼합하는 것을 지원하지 않습니다.[제품 설명서](https://portal.nutanix.com/page/documents/details?targetId=Hardware-Admin-Guide:har-product-mixing-restrictions-r.html)자세한 내용은.

그러나 한 HW 공급업체에서 다른 공급업체로 마이그레이션하거나 4세대 이상의 NX 플랫폼 간에 마이그레이션하는 목적의 경우**일시적으로**동일한 클러스터에 노드를 혼합하면 마이그레이션 프로세스를 빠르고 간편하게 진행할 수 있습니다.

# 예외 프로세스

예외적으로 다음 프로세스를 따르면 동일한 클러스터에서 서로 다른 하드웨어의 노드를 혼합하기 위해 지원 및 엔지니어링 승인을 얻을 수 있습니다.

## 가이드라인

SW 가드레일을 만드는 것이 도움이 되겠지만, 이러한 요청이 매우 드물다는 점을 고려하면 불필요해 보입니다. 가드레일이 마련되어 있지 않으므로 다음과 같습니다.**\~ 해야 하다**따라야 할 사항:

* 고객에게 커밋하기 전에 지원 및 엔지니어링의 승인을 받아야 합니다.  
* 마이그레이션은 공급업체/세대 X에서 새로운 하드웨어를 일시적으로(몇 주 단위로 측정) 추가하고 그 직후 공급업체/세대 Y에서 \*모든\* 하드웨어를 제거하는 것입니다.  
* 소프트웨어 업그레이드, 모든 종류의 LCM 기반 업그레이드 또는 라이센싱 작업과 같이 하드웨어 추가 및 제거 외에는 어떠한 시스템 변경도 발생해서는 안 됩니다.  
* NCC 경고 \- 양성인지 또는 조치가 필요한지 확인하기 위해 검토해야 합니다.  
* 발견 \- 양성인지 조치가 필요한지 확인하기 위해 검토해야 합니다.  
* RDMA \- 혼합 구성에서는 지원되지 않음 \- 플랫폼 간 지원이 일관되지 않음  
* 소스 및 대상 노드는 다음과 같이 유사한 저장 계층을 가져야 합니다.[이 문서](https://docs.google.com/document/d/1khlNAoDXILZGI0OCRJR_-umrU3DXY-FiGra1vNnpaMs/edit)  
  * 비 AES에서 AES로의 혼합(및 그 반대)은 허용되지 않습니다.  
  * 하이브리드에서 모든 NVMe로(또는 그 반대로)는 안 됩니다.  
* 대상 노드  
  * 소스 노드와 유사하거나 더 높은 네트워크 기능(예: LACP, 네트워크 분할을 위한 다중 포트 NIC)을 가져야 합니다.  
  * CPU 생성을 회귀할 수 없습니다.  
* 일반 HCI 1U 및 2U 플랫폼만 믹싱에 참여할 수 있습니다. NUS, RoBo, Edge 등과 같은 특수 플랫폼은 지원되지 않습니다.  
* 뉴타닉스전문 서비스위험을 줄이고 적시에 마이그레이션을 완료하려면 마이그레이션 중에 거주자 또는 파트너 서비스의 참여가 필요합니다.  
* 모든 플랫폼에 대한 활성 지원 계약(SW 및 HW)  
* 하드웨어 공급업체 혼합 \- NX, DX, DL, XC, HX, XF 혼합으로 제한됩니다. 언제든지 두 개 이상의 공급업체 플랫폼이 동일한 클러스터에 포함될 수 없습니다.  
* 혼합할 플랫폼은 자격이 있어야 하며 다음 위치에 있어야 합니다.[염산](https://portal.nutanix.com/page/documents/list?type=compatibilityList)  
* NX-G9 및 NX-G5 혼합 구성 \- NX-1175-G9와 NX-8150-G9는 혼합 구성에서 지원되지 않습니다. NX-1175-G9와 NX-8150-G9는 최소 AOS 6.7이 필요하며, NX-G5 시스템에서는 AOS 6.7이 지원되지 않습니다. 혼합하기 전에 NX-G9와 NX-G5 노드가 모두 동일한 AOS 6.5.x 버전에서 실행 중인지 확인하십시오.


혼합 클러스터 구성을 실행하는 동안 문제가 발생하지 않을 것이라는 보장은 없습니다. 위의 지침을 따르면 문제 발생 가능성이 크게 줄어듭니다.

## 혼합하기 전에

### 정보 수집

시트 사본을 만듭니다[여기](https://docs.google.com/spreadsheets/d/10AJSYaCc0wZn5nctd81wvngIqfoeweJwbQlzLLSRBi4/edit?gid=1915949738#gid=1915949738)각 탭에 모든 세부 정보를 입력하여 요청을 평가하고 예외 요청에 대해 생성한 JIRA 링크를 공유하는 데 필요한 정보를 수집합니다. 필요한 경우, 새 장비의 최소 지원 버전에 맞춰 다양한 구성 요소를 업그레이드해야 할 수 있습니다. 대부분의 데이터는 다음에서 확인할 수 있습니다.[포털 인사이트 대시보드](https://portal.nutanix.com/page/insights-search)고객이 Pulse를 활성화한 경우. 노드/블록에 시트에 언급된 특정 구성 요소가 포함되어 있지 않으면 비워 두세요.

시트에 캡처된 정보다음이 포함됩니다:

1. 블록/노드 일련 번호를 포함한 소스 및 대상 플랫폼 모델  
2. 각 플랫폼의 노드 수  
3. 각 플랫폼별 CPU 세대  
4. 소스 및 대상 플랫폼의 스토리지 계층  
5. 소스 및 대상 플랫폼의 네트워킹 구성  
6. VM 수  
7. AOS 버전  
8. 하이퍼바이저 유형(초기 요청은 AHV에만 국한됨) 및 버전  
9. 소스 클러스터의 각 HW 엔터티의 FW 버전  
10. 얼마나 오랫동안 혼합이 필요한가요?  
11. 모든 소스 및 대상 플랫폼 노드/블록에 대한 지원 계약 상태 및 종료 날짜  
12. 소스 클러스터의 각 노드와 추가될 각 노드의 /etc/nutanix/hardware\_config.json 출력  
13. SFDC 계정  
14. 클러스터 UUID(들)  
15. 펄스가 활성화되어 있나요?  
16. 전문 서비스 또는 거주자가 마이그레이션에 참여하고 있습니까?

### 승인 요청

하드웨어의 임시 혼합을 승인하는 요청은 아래 조직\*의 대표자의 승인을 받아야 합니다.

* 승인  
  * 지원 \- 제이슨 롱프리, 채드 싱글턴,서비스성-hw  
  * DevEx \- Farid Pirani, Dheeraj Reddy  
  * 공학(각각 1명씩 대표)  
    * 플랫폼 \- Sanjeev Kumar, Rohit Thukral, Aakash Jacob  
    * CDP \-시바 다바나게리, 프라탑 티와리, 찬드라 카르나파티

* 알림(선택 사항)  
  * 공학  
    * 인프라 \- 아룬 칸담바캄, 비노드 다니엘, 비스와 크리슈나무르티  
    * LCM \- 아룬 칸담바캄  
    * AHV – 수레시 검풀라, 펠리페 프란시오시, 조나단 데이비스  
    * NCC \- 바룬 비벡

\*NX-G9와 NX-G5를 혼합하는 경우, 지원팀의 승인만 필요하며, 지원팀은 JIRA의 다른 팀을 대신하여 승인합니다. 엔지니어링 컴포넌트 팀과 DevEx 팀에만 알리면 됩니다.

#### 승인 절차

**중요한:**SR 프로젝트에서 혼합 하드웨어 클러스터 승인(제목: \*고객 이름\* \- 혼합 하드웨어 클러스터 승인) 구성 요소를 사용하여 JIRA 티켓을 열어주세요.**그리고**필요한 세부 사항을 입력하세요**그리고** **위의 담당자에게 이메일을 보내세요**요청에 대한 조치를 취할 수 있도록 SR 티켓 번호와 함께 보내주세요.

요청 승인 여부를 추적하려면 SR 티켓의 '승인' 섹션을 참조하세요. 요청 승인/거부 또는 기술적인 논의는 장기적인 추적을 위해 티켓에 포함됩니다.

**SR 티켓의 보고자/담당자는 승인을 받을 책임이 있습니다.**

믹싱 요청이 승인되면 진행 방법에 대한 추가 지침이 제공됩니다. 승인된 모든 요청은 Serviceability에서 중앙에서 추적됩니다.[합류](https://confluence.eng.nutanix.com:8443/pages/viewpage.action?spaceKey=SW&title=Temporary+Mixed+Hardware+Clusters+-+Exception+Support+Model).

필요한 승인을 모두 받으면 JIRA 티켓을 닫으세요.

JIRA 워크플로우 데모 비디오:

[https://drive.google.com/file/d/1CFmpDdpNQfKzb9Ap27f-Bpqi\_4CWoQCG/view?usp=sharing](https://drive.google.com/file/d/1CFmpDdpNQfKzb9Ap27f-Bpqi_4CWoQCG/view?usp=sharing)

## 마이그레이션 창

믹싱이 활성화된 상태를 유지하는 기간을 제한하세요. 노드 추가가 완료되면 가능한 한 빨리 기존 노드를 제거하세요. 참고: AOS 6.5 이상에서는 여러 노드 제거를 동시에 대기열에 추가하여 전환 속도를 높이고 시스템 내 데이터 이동을 최소화할 수 있습니다.

## 마이그레이션 완료

모든 원래 노드를 제거한 후, 먼저 새 노드에 업데이트된 라이선스를 적용한 다음, LCM에서 광고한 대로 추가 소프트웨어/펌웨어 업그레이드 등 원하는 최적의 시스템 구성을 얻기 위해 필요한 다른 시스템 구성을 계속 진행합니다.

마지막으로 NCC를 실행하고 Pulse가 활성화된 경우 Insights 포털을 통해 클러스터 상태를 확인하여 활성 검색이나 알림이 클러스터 상태에 영향을 미치지 않는지 확인합니다.

## 마이그레이션 중 발생하는 일반적인 문제

혼합 클러스터 마이그레이션 중 보고된 일반적인 문제는 다음과 같습니다.[합류](https://confluence.eng.nutanix.com:8443/pages/viewpage.action?spaceKey=SW&title=Common+Issues+reported+during+the+Cluster+Conversion+Process)Nutanix 지원팀에 문의하기 전에 해결 단계를 꼭 따르세요.  
